<!DOCTYPE HTML>
<html lang="en">
  <head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta charset="utf-8">
    <title>nehan.js doc - docs</title>
    <link rel="stylesheet" type="text/css" href="//cdnjs.cloudflare.com/ajax/libs/prism/0.0.1/prism.min.css">
<link rel="stylesheet" href="/nehan.js/static/semantic/semantic.min.css">
<link rel="stylesheet" href="/nehan.js/static/css/main.css">

    <meta name="generator" content="nanoc 3.7.4">
  </head>
  <body>
    <header class="global-header">
  <div class="inner">
    <a class="logo" href="/">nehan.js</a>
    <nav class="global-nav">
      <ul>
	<li><a href="/nehan.js/install/index.html">Install</a></li>
	<li><a class="current" href="/nehan.js/docs/index.html">Docs</a></li>
      </ul>
    </nav>
  </div>
</header>

<div class="ui error icon legacy-browser-alert message" style="display:none">
  <i class="warning sign icon"></i>
  <div class="content">
    <div class="header">未対応のブラウザ</div>
    <p>当サイトはお使いのブラウザに対応していません。より新しいブラウザでアクセスして下さい。</p>
  </div>
</div>

    <main class="global-main">
      <div class="inner">
	<h2 class="ui header">Documents</h2>

<h3 class="ui dividing header">
<i class="right caret icon"></i><div class="content">Getting started</div>
</h3>

<h4 class="ui dividing header">
<i class="idea icon"></i> Create paged-element</h4>

<p>First of all, create paged-element that contains all generated pages by <code>Nehan.createPagedElement</code>.</p>

<p>And setting styles of <code>&lt;body&gt;</code> by <code>setStyle</code> that represents the size of each paged-media.</p>

<p>And after setting content text by <code>setContent</code>, paged media is generated asyncronously.</p>

<p>You can hook this generating process by <code>onProgress</code> and <code>onComplete</code>.</p>

<div class="code-container">
<div class="langspec">Javascript</div>
<div class="CodeRay"><div class="code"><pre class="highlight"><code class="language-javascript"><span class="keyword">var</span> pages = Nehan.createPagedElement().setStyle(<span class="string"><span class="delimiter">"</span><span class="content">body</span><span class="delimiter">"</span></span>, {
  <span class="key"><span class="delimiter">"</span><span class="content">flow</span><span class="delimiter">"</span></span>:<span class="string"><span class="delimiter">"</span><span class="content">lr-tb</span><span class="delimiter">"</span></span>, <span class="comment">// or "tb-rl"</span>
  <span class="key"><span class="delimiter">"</span><span class="content">font-size</span><span class="delimiter">"</span></span>:<span class="integer">16</span>, <span class="comment">// camel case like "fontSize" is not allowed.</span>
  <span class="key"><span class="delimiter">"</span><span class="content">width</span><span class="delimiter">"</span></span>:<span class="integer">640</span>, <span class="comment">// page width</span>
  <span class="key"><span class="delimiter">"</span><span class="content">height</span><span class="delimiter">"</span></span>:<span class="integer">480</span> <span class="comment">// page height</span>
}).setContent(<span class="string"><span class="delimiter">"</span><span class="content">&lt;p&gt;hello, nehan.js!!&lt;/p&gt;</span><span class="delimiter">"</span></span>, {
  <span class="function">onProgress</span>: <span class="keyword">function</span>(tree){
    <span class="comment">// tree.pageNo, tree.percent available</span>
  },
  <span class="function">onComplete</span>: <span class="keyword">function</span>(time){
    <span class="comment">// console.log("finished! %fmsec", time);</span>
  }
});</code></pre></div></div>
</div>

<div class="ui icon warning message">
<i class="warning icon"></i><p class="content">Note that camel cased property(like <code>fontSize</code>) is not allowed in <code>setStyle</code>.</p>
</div>

<h4 class="ui dividing header">
<i class="idea icon"></i> Set paged media to some target.</h4>

<p>You can obtain the DOM node that wraps paged media by <code>getElement</code>.</p>

<div class="code-container">
<div class="langspec">Javascript</div>
<div class="CodeRay"><div class="code"><pre class="highlight"><code class="language-javascript"><span class="predefined">$</span>(<span class="string"><span class="delimiter">"</span><span class="content">#target-element</span><span class="delimiter">"</span></span>).append(pages.getElement());</code></pre></div></div>
</div>

<h4 class="ui dividing header">
<i class="idea icon"></i> Bind events</h4>

<p>Paged-element contains all pages and <strong>state</strong> of current page, so <code>setNextPage</code> and <code>setPrevPage</code> is the method that updates the inner state of current page no of paged-element.</p>

<p>You can also set current page no directly by <code>setPage</code>, and total page count is given by <code>getPageCount</code>.</p>

<div class="code-container">
<div class="langspec">Javascript</div>
<div class="CodeRay"><div class="code"><pre class="highlight"><code class="language-javascript"><span class="predefined">$</span>(<span class="string"><span class="delimiter">"</span><span class="content">.next</span><span class="delimiter">"</span></span>).click(<span class="keyword">function</span>(){ pages.setNextPage() });
<span class="predefined">$</span>(<span class="string"><span class="delimiter">"</span><span class="content">.prev</span><span class="delimiter">"</span></span>).click(<span class="keyword">function</span>(){ pages.setPrevPage() });
<span class="predefined">$</span>(<span class="string"><span class="delimiter">"</span><span class="content">.first</span><span class="delimiter">"</span></span>).click(<span class="keyword">function</span>(){ pages.setPage(<span class="integer">0</span>) });
<span class="predefined">$</span>(<span class="string"><span class="delimiter">"</span><span class="content">.last</span><span class="delimiter">"</span></span>).click(<span class="keyword">function</span>(){ pages.setPage(pages.getPageCount() - <span class="integer">1</span>) });</code></pre></div></div>
</div>

<h3 class="ui dividing header">
<i class="right caret icon"></i><div class="content">Setting style</div>
</h3>

<h4 class="ui dividing header">
<i class="idea icon"></i> Preface</h4>

<h5>logical property</h5>

<p>As nehan.js is <strong>logical</strong> layout engine, you must define all layouting properties as <strong>logical</strong> property name.</p>

<p>For example, you set width of some element like <code>width:300px</code> normally, but in nehan.js, the meaning of <code>width</code> is different as to <code>flow</code> of document.</p>

<p>If <code>flow</code> of document is <code>lr-tb</code>, <code>width</code> is the size along inline level direction, but if <code>flow</code> is <code>tb-rl</code>, <code>width</code> is the size along block level direction, because in vertical mode, block level flows from left to right(or right to left).</p>

<p>So if you want to set the size of inline direction, you must use the property <code>measure</code>, and use the property <code>extent</code> for the block level direction.</p>

<div class="ui icon info message">
<i class="info icon"></i><p class="content">For more details for logical property, see <a href="http://www.w3.org/TR/2012/WD-css3-writing-modes-20121115/#abstract-box">CSS Writing Modes Module Level3 - Abstract box dimemsions.</a>.</p>
</div>

<h5>special prefix</h5>

<p>To avoid confliction of css defined in outer world of nehan.js, both css className and idName must be prefixed by <code>nehan-</code>.</p>

<h4 class="ui dividing header">
<i class="idea icon"></i> Example1</h4>

<p>Set some class size 100px at inline level, 200px at block level, and set margin 20px at block level.</p>

<div class="code-container">
<div class="langspec">Javascript</div>
<div class="CodeRay"><div class="code"><pre class="highlight"><code class="language-javascript"><span class="comment">// all class name of nehan is required "nehan-" prefix.</span>
pages.setStyle(<span class="string"><span class="delimiter">"</span><span class="content">.nehan-example1</span><span class="delimiter">"</span></span>, {
  <span class="key">measure</span>:<span class="string"><span class="delimiter">"</span><span class="content">100px</span><span class="delimiter">"</span></span>,
  <span class="key">extent</span>:<span class="string"><span class="delimiter">"</span><span class="content">200px</span><span class="delimiter">"</span></span>,
  <span class="key">margin</span>:{<span class="key">start</span>:<span class="integer">0</span>, <span class="key">end</span>:<span class="integer">0</span>, <span class="key">before</span>:<span class="integer">0</span>, <span class="key">after</span>:<span class="string"><span class="delimiter">"</span><span class="content">20px</span><span class="delimiter">"</span></span>}
});</code></pre></div></div>
</div>

<div class="ui warning icon message">
<i class="warning icon"></i><p class="content">
You might wonder what is <code>{start:0, end:0, before:0, after:"20px"}</code>?<br>
<br>
This is <b>logical direction</b> of abstract box, <code>start</code> and <code>end</code> are along inline direction, and <code>before</code> and <code>after</code> are along block level direction.<br>
<br>
So if flow is <code>lr-tb</code>, <code>margin:{after:"20px"}</code> means <code>margin-bottom:"20px"</code>.<br>
<br>
But if flow is <code>tb-rl</code>, it means <code>margin-left:20px</code> because in tb-rl, block level flows from right to left.
</p>
</div>

<h4 class="ui dividing header">
<i class="idea icon"></i> Example2</h4>

<p>Set <code>backgrond-color</code> to <code>blue</code> if nth-child is even, otherwise <code>red</code>.</p>

<div class="code-container">
<div class="langspec">Javascript</div>
<div class="CodeRay"><div class="code"><pre class="highlight"><code class="language-javascript">pages.setStyle(<span class="string"><span class="delimiter">"</span><span class="content">.nehan-example2</span><span class="delimiter">"</span></span>, {
  <span class="key"><span class="delimiter">"</span><span class="content">background-color</span><span class="delimiter">"</span></span>:<span class="keyword">function</span>(ctx){
     <span class="keyword">if</span>(ctx.getChildIndex() % <span class="integer">2</span> === <span class="integer">0</span>){
       <span class="keyword">return</span> <span class="string"><span class="delimiter">"</span><span class="content">blue</span><span class="delimiter">"</span></span>;
     } <span class="keyword">else</span> {
       <span class="keyword">return</span> <span class="string"><span class="delimiter">"</span><span class="content">red</span><span class="delimiter">"</span></span>;
     }
  }
});</code></pre></div></div>
</div>

<p>For functional value is supported in nehan.js, you don't need to remember css property <code>nth-child</code>, you can set them by javascript <code>if/else</code> clause by looking selector context object.</p>

<h4 class="ui dividing header">
<i class="idea icon"></i> Example3</h4>

<p>You can set global style by <code>Nehan.setStyle</code>.</p>

<div class="code-container">
<div class="langspec">Javascript</div>
<div class="CodeRay"><div class="code"><pre class="highlight"><code class="language-javascript"><span class="comment">// this is 'local' style for paged-element.</span>
pages.setStyle(<span class="string"><span class="delimiter">"</span><span class="content">p</span><span class="delimiter">"</span></span>, {
  <span class="key">margin</span>:{<span class="key">after</span>:<span class="string"><span class="delimiter">"</span><span class="content">1em</span><span class="delimiter">"</span></span>}
});

<span class="comment">// this is 'global' style.</span>
Nehan.setStyle(<span class="string"><span class="delimiter">"</span><span class="content">h1</span><span class="delimiter">"</span></span>, {
  <span class="key"><span class="delimiter">"</span><span class="content">font-size</span><span class="delimiter">"</span></span>:<span class="string"><span class="delimiter">"</span><span class="content">3em</span><span class="delimiter">"</span></span>
});

<span class="comment">// set all width of paged-media to 80% of screen.</span>
Nehan.setStyle(<span class="string"><span class="delimiter">"</span><span class="content">body</span><span class="delimiter">"</span></span>, {
  <span class="key"><span class="delimiter">"</span><span class="content">width</span><span class="delimiter">"</span></span>:<span class="keyword">function</span>(){
    <span class="keyword">return</span> Math.floor(screen.width * <span class="integer">80</span> / <span class="integer">100</span>);
  }
});</code></pre></div></div>
</div>

<h4 class="ui dividing header">
<i class="idea icon"></i> Example4</h4>

<p>Using <code>onload</code> property, you can change markup dynamically before parsing.</p>

<div class="code-container">
<div class="langspec">Javascript</div>
<div class="CodeRay"><div class="code"><pre class="highlight"><code class="language-javascript">pages.setStyle(<span class="string"><span class="delimiter">"</span><span class="content">.nehan-time</span><span class="delimiter">"</span></span>, {
  <span class="function">onload</span>:<span class="keyword">function</span>(context){
     <span class="keyword">var</span> markup = context.getMarkup();
     <span class="keyword">var</span> now = <span class="keyword">new</span> Date().toDateString();

     <span class="comment">// dynamically rewrite markup content.</span>
     markup.setContent([
       <span class="string"><span class="delimiter">"</span><span class="content">&lt;p&gt;You have visited this page at &lt;time&gt;</span><span class="delimiter">"</span></span> + now + <span class="string"><span class="delimiter">"</span><span class="content">&lt;/time&gt;&lt;/p&gt;</span><span class="delimiter">"</span></span>,
       markup.getContent()
     ].join(<span class="string"><span class="delimiter">"</span><span class="delimiter">"</span></span>));
  }
});</code></pre></div></div>
</div>

<h4 class="ui dividing header">
<i class="idea icon"></i> Example5</h4>

<p>Using <code>oncreate</code> property, you can hook the evaluation phase just after converting from layout tree to DOM node.</p>

<div class="code-container">
<div class="langspec">Javascript</div>
<div class="CodeRay"><div class="code"><pre class="highlight"><code class="language-javascript">pages.setStyle(<span class="string"><span class="delimiter">"</span><span class="content">p</span><span class="delimiter">"</span></span>, {
  <span class="function">oncreate</span>:<span class="keyword">function</span>(dom, context){
    <span class="predefined">$</span>(dom).click(<span class="keyword">function</span>(){
       alert(<span class="string"><span class="delimiter">"</span><span class="content">click p!</span><span class="delimiter">"</span></span>);
    });
  }
});</code></pre></div></div>
</div>

      </div>
    </main>
    <script type="text/x-template" id="tmpl-reader">
  <div class="pager">
    <button class="ui {{leftButtonColor}} left icon button"
	    v-on="click:onClickLeft">{{{ leftButtonLabel }}}</button>
    <div class="progress"><span class="page-no" v-text="pageNo"></span> of <span class="page-count" v-text="pageCount"></span></div>
    <button class="ui {{rightButtonColor}} right icon button"
	    v-on="click:onClickRight">{{{ rightButtonLabel }}}</button>
    <div class="ui icon buttons">
      <button v-class="green:!isVert()" class="ui popup-enabled button" v-on="click:onClickHori" data-content="horizontal"><i class="align left icon"></i></button>
      <div class="or"></div>
      <button v-class="green:isVert()" class="ui popup-enabled button" v-on="click:onClickVert" data-content="vertical"><i class="rotated align left icon"></i></button>
    </div>
  </div>
  <div class="screen" v-el="screen"></div>
</script>

    <div class="global-footer">
</div>

    <script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
<script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/fastclick/1.0.3/fastclick.min.js"></script>
<script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/lodash.js/2.4.1/lodash.min.js"></script>
<script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/vue/0.11.3/vue.min.js"></script>
<script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/jquery-cookie/1.4.1/jquery.cookie.min.js"></script>
<script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/prism/0.0.1/prism.min.js"></script>
<script type="text/javascript" src="/nehan.js/static/semantic/semantic.min.js"></script>
<script type="text/javascript" src="/nehan.js/static/js/nehan.min.js"></script>
<script type="text/javascript" src="/nehan.js/static/js/main.min.js"></script>

  </body>
</html>
