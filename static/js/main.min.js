var Ndoc=Ndoc||{};$(function(){var t=Nehan.Env.client;t.isIE()&&t.version<=8&&$(".legacy-browser-alert").show(),$(".nehan-reader").each(function(t,e){var i=$(e),n=i.html(),o=i.data("flow");new Ndoc.Reader({el:e,data:{text:n,flow:o}})})}),Ndoc.Settings={},Nehan.setStyles({body:{textAlign:"justify",width:"90%",height:function(){return Math.floor(55*screen.height/100)}}}),Ndoc.Reader=Vue.extend({template:"#tmpl-reader",data:function(){return{flow:"lr-tb",text:"text is not defined.",pageIndex:0,pageCount:0,width:400,height:300,fontSize:12}},computed:{pageNo:function(){return this.pageIndex+1},leftButtonPopup:function(){return this.isVert()?"forward page":"backward page"},rightButtonPopup:function(){return this.isVert()?"backward page":"forward page"},leftButtonLabel:function(){return this.isVert()?"<i class='flipped play icon'></i>":"<i class='backward icon'></i>"},rightButtonLabel:function(){return this.isVert()?"<i class='flipped backward icon'></i>":"<i class='play icon'></i>"},leftButtonColor:function(){return this.isVert()?"blue":"red"},rightButtonColor:function(){return this.isVert()?"red":"blue"}},ready:function(){this.mountReader(),this.$watch("flow",this.mountReader),$(this.$el).find(".popup-enabled").popup()},methods:{mountReader:function(){this.pageIndex=0,this.pageCount=0,this.pages=Ndoc.Utils.createPagedElement().setStyle("body",{flow:this.flow,width:this.width,height:this.height,"font-size":this.fontSize,"word-break":"tb-rl"===this.flow?"break-all":"normal"}).setContent(this.text,{onProgress:function(){this.pageCount++}.bind(this),onComplete:function(){}}),$(this.$$.screen).empty().css({width:this.width+20,height:this.height+25}).append(this.pages.getElement())},isVert:function(){return"tb-rl"===this.flow},onClickHori:function(){this.flow="lr-tb"},onClickVert:function(){this.flow="tb-rl"},onClickLeft:function(){this.isVert()?this.pages.setNextPage():this.pages.setPrevPage(),this.pageIndex=this.pages.getPageNo()},onClickRight:function(){this.isVert()?this.pages.setPrevPage():this.pages.setNextPage(),this.pageIndex=this.pages.getPageNo()}}}),Ndoc.Utils={createPagedElement:function(){return Nehan.createPagedElement({display:{fontImgRoot:"http://static.antiscroll.com/image/char-img"}})}};